<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PaRaBeNs LEONOR</title>
    <style>
        body { 
            background: radial-gradient(circle, #1a1a1a, #000); 
            color: #fff; 
            font-family: 'Arial Black', sans-serif; 
            display: flex; flex-direction: column; align-items: center; justify-content: center; 
            height: 100vh; margin: 0; overflow: hidden;
        }

        .title-paragraph {color: #f1c40f; text-shadow: 0 0 10px #f39c12, 0 0 20px #e67e22; font-size: 3rem; margin-bottom: 15px; text-transform: uppercase;
        }

        .game-area {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 40px;
        }

        /* Mascot Styling */
        .mascot {
            width: 180px; /* Adjust based on your PNG size */
            height: auto;
            transition: transform 0.3s;
            /* Default slow dance */
            animation: poseSwitch 0.8s ease-in-out infinite alternate;
        }

        /* Faster dance class applied via JavaScript during spin */
        .mascot.spinning {
            animation: poseSwitch 0.2s ease-in-out infinite alternate;
        }

        @keyframes poseSwitch {
            0% { transform: rotate(-8deg) scale(1); }
            100% { transform: rotate(8deg) scale(1.05); }
        }

        #container { position: relative; padding: 15px; border: 10px solid #d35400; border-radius: 50%; background: #222; box-shadow: 0 0 30px rgba(0,0,0,0.5); }

        #container::after {
            content: ""; position: absolute; top: -8px; left: -8px; right: -8px; bottom: -8px;
            border: 5px dotted #fff; border-radius: 50%; animation: blink 0.5s step-start infinite;
        }
        @keyframes blink { 50% { opacity: 0; } }

        #pointer { 
            position: absolute; top: -20px; left: 50%; transform: translateX(-50%); 
            width: 0; height: 0; border-left: 20px solid transparent; border-right: 20px solid transparent; 
            border-top: 40px solid #e74c3c; z-index: 100;
        }

        canvas { border-radius: 50%; }

        button { 
            margin-top: 30px; padding: 15px 50px; font-size: 1.6rem; font-weight: bold;
            background: #e74c3c; border: 4px solid #fff; border-radius: 12px;
            color: #fff; cursor: pointer; box-shadow: 0 6px #962d22;
            text-transform: uppercase;
        }
        button:active { transform: translateY(3px); box-shadow: 0 3px #962d22; }
        button:disabled { opacity: 0.5; filter: grayscale(1); }
    </style>
</head>
<body>

    <p class="title-paragraph">
        parabéns Leonor! agora...<br>
        qual prenda receberás?
    </p>

    <div class="game-area">
        <img src="sylus.png" alt="Mascot Left" class="mascot" id="leftMascot">

        <div id="container">
            <div id="pointer"></div>
            <canvas id="wheel" width="450" height="450"></canvas>
        </div>

        <img src="gojo.png" alt="Mascot Right" class="mascot" id="rightMascot">
    </div>

    <button id="spinBtn">Desejamos-te sorte!</button>

    <script>
        const canvas = document.getElementById('wheel');
        const ctx = canvas.getContext('2d');
        const spinBtn = document.getElementById('spinBtn');
        const mascots = document.querySelectorAll('.mascot');
        
        const options = ["0", "1", "2", "0", "1", "2", "0", "1", "2", "0", "1", "2", "0", "1", "2", "0", "1", "2"];
        const numSlices = options.length;
        const sliceDeg = 360 / numSlices;

        function drawWheel() {
            const center = canvas.width / 2;
            const radius = canvas.width / 2;
            for (let i = 0; i < numSlices; i++) {
                ctx.beginPath();
                if (options[i] === "1") {
                    ctx.fillStyle = "#e74c3c"; 
                } else {
                    ctx.fillStyle = (i % 2 === 0) ? "#111" : "#eee";
                }
                ctx.moveTo(center, center);
                ctx.arc(center, center, radius, (i * sliceDeg - 90) * Math.PI/180, ((i+1) * sliceDeg - 90) * Math.PI/180);
                ctx.fill();
                ctx.strokeStyle = "#f1c40f";
                ctx.lineWidth = 2;
                ctx.stroke();
                
                ctx.save();
                ctx.translate(center, center);
                ctx.rotate((i * sliceDeg + sliceDeg/2 - 90) * Math.PI/180);
                ctx.fillStyle = (options[i] === "1" || (i % 2 !== 0)) ? "#000" : "#fff";
                ctx.font = "bold 30px Arial";
                ctx.textAlign = "center";
                ctx.fillText(options[i], radius * 0.7, 10);
                ctx.restore();
            }
        }

        function spinWheel() {
            spinBtn.disabled = true;
            
            // Start mascot "hype" animation
            mascots.forEach(m => m.classList.add('spinning'));

            const winningIndices = options.map((val, idx) => val === "1" ? idx : -1).filter(idx => idx !== -1);
            const targetIndex = winningIndices[Math.floor(Math.random() * winningIndices.length)];
            
            const jitter = (Math.random() * (sliceDeg * 0.6)) - (sliceDeg * 0.3);
            const stopAt = 360 - (targetIndex * sliceDeg) - (sliceDeg / 2) + jitter;
            const finalRotation = (360 * 10) + stopAt;

            canvas.style.transition = "transform 6s cubic-bezier(0.1, 0, 0.1, 1)";
            canvas.style.transform = `rotate(${finalRotation}deg)`;

            setTimeout(() => {
                spinBtn.disabled = false;
                // Stop mascot "hype" animation
                mascots.forEach(m => m.classList.remove('spinning'));
                alert("QUASE GANHAVAS O PRÉMIO MÁXIMO! NÃO TE PREOCUPES QUE ESSE DIA IRÁ CHEGAR!");
            }, 6000);
        }

        drawWheel();
        spinBtn.addEventListener('click', spinWheel);
    </script>
</body>
</html>